const formatForDate = require('./formatForDate');
const getAge = dateBirth => {
  const timestamp = Date.parse(formatForDate(dateBirth));
  if (isNaN(timestamp)) {
    console.error('Дата неправильного формата');
    return '';
  }

  const currentDate = new Date();
  const currenMonth = currentDate.getMonth();
  const currentDay = currentDate.getDate();
  const currentYear = currentDate.getFullYear();

  const birthday = new Date(timestamp);
  const birthdayMonth = birthday.getMonth();
  const birthdayDay = birthday.getDate();
  const birthdayYear = birthday.getFullYear();

  if (birthdayMonth >= currenMonth && birthdayDay > currentDay) {
    return currentYear - birthdayYear - 1;
  }

  return currentYear - birthdayYear;
};

module.exports = getAge;
